Ü
uC:\Users\giwrg\OneDrive\Desktop\ICT\Semester3\DeusBarberShopService\Deus_DataAccessLayer\Data\ApplicationDbContext.cs
	namespace

 	 
Deus_DataAccessLayer


 
.

 
Data

 #
{ 
public 

class  
ApplicationDbContext %
:& '
IdentityDbContext( 9
<9 :
ApplicationOwner: J
>J K
{ 
public  
ApplicationDbContext #
(# $
DbContextOptions$ 4
<4 5 
ApplicationDbContext5 I
>I J
optionsK R
)R S
: 
base 
( 
options 
) 
{ 	
} 	
public 
DbSet 
< 
Service 
> 
Services &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
DbSet 
< 
Appointment  
>  !
Appointments" .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
DbSet 
< 
Customer 
> 
	Customers (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
	protected 
override 
void 
OnModelCreating  /
(/ 0
ModelBuilder0 <
builder= D
)D E
{ 	
base 
. 
OnModelCreating  
(  !
builder! (
)( )
;) *
builder 
. 
Entity 
< 
ApplicationOwner +
>+ ,
(, -
)- .
.. /
Property/ 7
(7 8
a8 9
=>: <
a= >
.> ?
PhoneNumber? J
)J K
., -

IsRequired- 7
(7 8
)8 9
., -
HasMaxLength- 9
(9 :
$num: <
)< =
;= >
}   	
}!! 
}"" ®
iC:\Users\giwrg\OneDrive\Desktop\ICT\Semester3\DeusBarberShopService\Deus_DataAccessLayer\Data\SeedData.cs
	namespace		 	 
Deus_DataAccessLayer		
 
.		 
Data		 #
{

 
public 

static 
class 
SeedData  
{ 
public 
async 
static 
Task  
Seed! %
(% &
UserManager& 1
<1 2
ApplicationOwner2 B
>B C
userManagerD O
,O P
RoleManager 
< 
IdentityRole #
># $
roleManager% 0
)0 1
{ 	
await 
	SeedRoles 
( 
roleManager '
)' (
;( )
await 
	SeedUsers 
( 
userManager '
)' (
;( )
} 	
private 
async 
static 
Task !
	SeedUsers" +
(+ ,
UserManager, 7
<7 8
ApplicationOwner8 H
>H I
userManagerJ U
)U V
{ 	
if 
( 
await 
userManager !
.! "
FindByEmailAsync" 2
(2 3
$str3 I
)I J
==K M
nullN R
)R S
{ 
var 
user 
= 
new 
ApplicationOwner /
{ 
	FirstName 
= 
$str  *
,* +
LastName 
= 
$str '
,' (
PhoneNumber 
=  !
$str" .
,. /
UserName 
= 
$str A
,A B
Email 
= 
$str >
} 
; 
var 
result 
= 
await "
userManager# .
.. /
CreateAsync/ :
(: ;
user; ?
,? @
$strA I
)I J
;J K
if   
(   
result   
.   
	Succeeded   $
)  $ %
{!! 
await"" 
userManager"" %
.""% &
AddToRoleAsync""& 4
(""4 5
user""5 9
,""9 :
$str""; J
)""J K
;""K L
}## 
}$$ 
}%% 	
private&& 
async&& 
static&& 
Task&& !
	SeedRoles&&" +
(&&+ ,
RoleManager&&, 7
<&&7 8
IdentityRole&&8 D
>&&D E
roleManager&&F Q
)&&Q R
{'' 	
if)) 
()) 
!)) 
await)) 
roleManager)) "
.))" #
RoleExistsAsync))# 2
())2 3
$str))3 B
)))B C
)))C D
{** 
var++ 
role++ 
=++ 
new++ 
IdentityRole++ +
{,, 
Name-- 
=-- 
$str-- *
}.. 
;.. 
await00 
roleManager00 !
.00! "
CreateAsync00" -
(00- .
role00. 2
)002 3
;003 4
}11 
if33 
(33 
!33 
await33 
roleManager33 "
.33" #
RoleExistsAsync33# 2
(332 3
$str333 =
)33= >
)33> ?
{44 
var55 
role55 
=55 
new55 
IdentityRole55 +
{66 
Name77 
=77 
$str77 %
}88 
;88 
await99 
roleManager99 !
.99! "
CreateAsync99" -
(99- .
role99. 2
)992 3
;993 4
}:: 
};; 	
}<< 
}== Ü
}C:\Users\giwrg\OneDrive\Desktop\ICT\Semester3\DeusBarberShopService\Deus_DataAccessLayer\Interfaces\IAppointmentRepository.cs
	namespace 	 
Deus_DataAccessLayer
 
. 
IRepositories ,
{		 
public

 

	interface

 "
IAppointmentRepository

 +
:

, -
IBaseRepository

. =
<

= >
Appointment

> I
>

I J
{ 
Task 
< 
bool 
> 
IsDateTimeAvailable &
(& '
DateTime' /
dateTime0 8
)8 9
;9 :
} 
} ö
vC:\Users\giwrg\OneDrive\Desktop\ICT\Semester3\DeusBarberShopService\Deus_DataAccessLayer\Interfaces\IBaseRepository.cs
	namespace 	 
Deus_DataAccessLayer
 
. 
IRepositories ,
{ 
public		 

	interface		 
IBaseRepository		 $
<		$ %
T		% &
>		& '
where		( -
T		. /
:		0 1
class		2 7
{

 
Task 
< 
IList 
< 
T 
> 
> 
GetAll 
( 
) 
;  
Task 
< 
T 
> 
GetById 
( 
int 
id 
) 
;  
Task 
< 
T 
> 
CreateUpdate 
( 
T 
entity %
)% &
;& '
Task 
< 
bool 
> 
Delete 
( 
T 
entity "
)" #
;# $
Task 
< 
bool 
> 
SaveChanges 
( 
)  
;  !
Task 
< 
bool 
> 
IsExists 
( 
int 
id  "
)" #
;# $
} 
} ¡
zC:\Users\giwrg\OneDrive\Desktop\ICT\Semester3\DeusBarberShopService\Deus_DataAccessLayer\Interfaces\ICustomerRepository.cs
	namespace 	 
Deus_DataAccessLayer
 
. 
IRepositories ,
{		 
public

 

	interface

 
ICustomerRepository

 (
:

) *
IBaseRepository

+ :
<

: ;
Customer

; C
>

C D
{ 
} 
} æ
yC:\Users\giwrg\OneDrive\Desktop\ICT\Semester3\DeusBarberShopService\Deus_DataAccessLayer\Interfaces\IServiceRepository.cs
	namespace 	 
Deus_DataAccessLayer
 
. 
IRepositories ,
{		 
public

 

	interface

 
IServiceRepository

 '
:

( )
IBaseRepository

* 9
<

9 :
Service

: A
>

A B
{ 
} 
} ¯ü
ÉC:\Users\giwrg\OneDrive\Desktop\ICT\Semester3\DeusBarberShopService\Deus_DataAccessLayer\Migrations\20210523104425_InitialCreate.cs
	namespace 	 
Deus_DataAccessLayer
 
. 

Migrations )
{ 
public 

partial 
class 
InitialCreate &
:' (
	Migration) 2
{ 
	protected		 
override		 
void		 
Up		  "
(		" #
MigrationBuilder		# 3
migrationBuilder		4 D
)		D E
{

 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str #
,# $
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
string& ,
>, -
(- .
type. 2
:2 3
$str4 :
,: ;
nullable< D
:D E
falseF K
)K L
,L M
Name 
= 
table  
.  !
Column! '
<' (
string( .
>. /
(/ 0
type0 4
:4 5
$str6 N
,N O
	maxLengthP Y
:Y Z
$num[ ^
,^ _
nullable` h
:h i
truej n
)n o
,o p
NormalizedName "
=# $
table% *
.* +
Column+ 1
<1 2
string2 8
>8 9
(9 :
type: >
:> ?
$str@ X
,X Y
	maxLengthZ c
:c d
$nume h
,h i
nullablej r
:r s
truet x
)x y
,y z
ConcurrencyStamp $
=% &
table' ,
., -
Column- 3
<3 4
string4 :
>: ;
(; <
type< @
:@ A
$strB H
,H I
nullableJ R
:R S
trueT X
)X Y
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 5
,5 6
x7 8
=>9 ;
x< =
.= >
Id> @
)@ A
;A B
} 
) 
; 
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str #
,# $
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
string& ,
>, -
(- .
type. 2
:2 3
$str4 :
,: ;
nullable< D
:D E
falseF K
)K L
,L M
	FirstName 
= 
table  %
.% &
Column& ,
<, -
string- 3
>3 4
(4 5
type5 9
:9 :
$str; R
,R S
	maxLengthT ]
:] ^
$num_ a
,a b
nullablec k
:k l
falsem r
)r s
,s t
LastName 
= 
table $
.$ %
Column% +
<+ ,
string, 2
>2 3
(3 4
type4 8
:8 9
$str: Q
,Q R
	maxLengthS \
:\ ]
$num^ `
,` a
nullableb j
:j k
falsel q
)q r
,r s
UserName   
=   
table   $
.  $ %
Column  % +
<  + ,
string  , 2
>  2 3
(  3 4
type  4 8
:  8 9
$str  : R
,  R S
	maxLength  T ]
:  ] ^
$num  _ b
,  b c
nullable  d l
:  l m
true  n r
)  r s
,  s t
NormalizedUserName!! &
=!!' (
table!!) .
.!!. /
Column!!/ 5
<!!5 6
string!!6 <
>!!< =
(!!= >
type!!> B
:!!B C
$str!!D \
,!!\ ]
	maxLength!!^ g
:!!g h
$num!!i l
,!!l m
nullable!!n v
:!!v w
true!!x |
)!!| }
,!!} ~
Email"" 
="" 
table"" !
.""! "
Column""" (
<""( )
string"") /
>""/ 0
(""0 1
type""1 5
:""5 6
$str""7 O
,""O P
	maxLength""Q Z
:""Z [
$num""\ _
,""_ `
nullable""a i
:""i j
true""k o
)""o p
,""p q
NormalizedEmail## #
=##$ %
table##& +
.##+ ,
Column##, 2
<##2 3
string##3 9
>##9 :
(##: ;
type##; ?
:##? @
$str##A Y
,##Y Z
	maxLength##[ d
:##d e
$num##f i
,##i j
nullable##k s
:##s t
true##u y
)##y z
,##z {
EmailConfirmed$$ "
=$$# $
table$$% *
.$$* +
Column$$+ 1
<$$1 2
bool$$2 6
>$$6 7
($$7 8
type$$8 <
:$$< =
$str$$> G
,$$G H
nullable$$I Q
:$$Q R
false$$S X
)$$X Y
,$$Y Z
PasswordHash%%  
=%%! "
table%%# (
.%%( )
Column%%) /
<%%/ 0
string%%0 6
>%%6 7
(%%7 8
type%%8 <
:%%< =
$str%%> D
,%%D E
nullable%%F N
:%%N O
true%%P T
)%%T U
,%%U V
SecurityStamp&& !
=&&" #
table&&$ )
.&&) *
Column&&* 0
<&&0 1
string&&1 7
>&&7 8
(&&8 9
type&&9 =
:&&= >
$str&&? E
,&&E F
nullable&&G O
:&&O P
true&&Q U
)&&U V
,&&V W
ConcurrencyStamp'' $
=''% &
table''' ,
.'', -
Column''- 3
<''3 4
string''4 :
>'': ;
(''; <
type''< @
:''@ A
$str''B H
,''H I
nullable''J R
:''R S
true''T X
)''X Y
,''Y Z
PhoneNumber(( 
=((  !
table((" '
.((' (
Column((( .
<((. /
string((/ 5
>((5 6
(((6 7
type((7 ;
:((; <
$str((= T
,((T U
	maxLength((V _
:((_ `
$num((a c
,((c d
nullable((e m
:((m n
false((o t
)((t u
,((u v 
PhoneNumberConfirmed)) (
=))) *
table))+ 0
.))0 1
Column))1 7
<))7 8
bool))8 <
>))< =
())= >
type))> B
:))B C
$str))D M
,))M N
nullable))O W
:))W X
false))Y ^
)))^ _
,))_ `
TwoFactorEnabled** $
=**% &
table**' ,
.**, -
Column**- 3
<**3 4
bool**4 8
>**8 9
(**9 :
type**: >
:**> ?
$str**@ I
,**I J
nullable**K S
:**S T
false**U Z
)**Z [
,**[ \

LockoutEnd++ 
=++  
table++! &
.++& '
Column++' -
<++- .
DateTimeOffset++. <
>++< =
(++= >
type++> B
:++B C
$str++D ^
,++^ _
nullable++` h
:++h i
true++j n
)++n o
,++o p
LockoutEnabled,, "
=,,# $
table,,% *
.,,* +
Column,,+ 1
<,,1 2
bool,,2 6
>,,6 7
(,,7 8
type,,8 <
:,,< =
$str,,> G
,,,G H
nullable,,I Q
:,,Q R
false,,S X
),,X Y
,,,Y Z
AccessFailedCount-- %
=--& '
table--( -
.--- .
Column--. 4
<--4 5
int--5 8
>--8 9
(--9 :
type--: >
:--> ?
$str--@ I
,--I J
nullable--K S
:--S T
false--U Z
)--Z [
}.. 
,.. 
constraints// 
:// 
table// "
=>//# %
{00 
table11 
.11 

PrimaryKey11 $
(11$ %
$str11% 5
,115 6
x117 8
=>119 ;
x11< =
.11= >
Id11> @
)11@ A
;11A B
}22 
)22 
;22 
migrationBuilder44 
.44 
CreateTable44 (
(44( )
name55 
:55 
$str55 !
,55! "
columns66 
:66 
table66 
=>66 !
new66" %
{77 
Id88 
=88 
table88 
.88 
Column88 %
<88% &
int88& )
>88) *
(88* +
type88+ /
:88/ 0
$str881 :
,88: ;
nullable88< D
:88D E
false88F K
)88K L
.99 

Annotation99 #
(99# $
$str99$ D
,99D E)
NpgsqlValueGenerationStrategy99F c
.99c d#
IdentityByDefaultColumn99d {
)99{ |
,99| }
	FirstName:: 
=:: 
table::  %
.::% &
Column::& ,
<::, -
string::- 3
>::3 4
(::4 5
type::5 9
:::9 :
$str::; R
,::R S
	maxLength::T ]
:::] ^
$num::_ a
,::a b
nullable::c k
:::k l
false::m r
)::r s
,::s t
LastName;; 
=;; 
table;; $
.;;$ %
Column;;% +
<;;+ ,
string;;, 2
>;;2 3
(;;3 4
type;;4 8
:;;8 9
$str;;: Q
,;;Q R
	maxLength;;S \
:;;\ ]
$num;;^ `
,;;` a
nullable;;b j
:;;j k
false;;l q
);;q r
,;;r s
PhoneNumber<< 
=<<  !
table<<" '
.<<' (
Column<<( .
<<<. /
string<</ 5
><<5 6
(<<6 7
type<<7 ;
:<<; <
$str<<= T
,<<T U
	maxLength<<V _
:<<_ `
$num<<a c
,<<c d
nullable<<e m
:<<m n
false<<o t
)<<t u
,<<u v
EmailAddress==  
===! "
table==# (
.==( )
Column==) /
<==/ 0
string==0 6
>==6 7
(==7 8
type==8 <
:==< =
$str==> V
,==V W
	maxLength==X a
:==a b
$num==c f
,==f g
nullable==h p
:==p q
false==r w
)==w x
}>> 
,>> 
constraints?? 
:?? 
table?? "
=>??# %
{@@ 
tableAA 
.AA 

PrimaryKeyAA $
(AA$ %
$strAA% 3
,AA3 4
xAA5 6
=>AA7 9
xAA: ;
.AA; <
IdAA< >
)AA> ?
;AA? @
}BB 
)BB 
;BB 
migrationBuilderDD 
.DD 
CreateTableDD (
(DD( )
nameEE 
:EE 
$strEE  
,EE  !
columnsFF 
:FF 
tableFF 
=>FF !
newFF" %
{GG 
IdHH 
=HH 
tableHH 
.HH 
ColumnHH %
<HH% &
intHH& )
>HH) *
(HH* +
typeHH+ /
:HH/ 0
$strHH1 :
,HH: ;
nullableHH< D
:HHD E
falseHHF K
)HHK L
.II 

AnnotationII #
(II# $
$strII$ D
,IID E)
NpgsqlValueGenerationStrategyIIF c
.IIc d#
IdentityByDefaultColumnIId {
)II{ |
,II| }
ServiceNameJJ 
=JJ  !
tableJJ" '
.JJ' (
ColumnJJ( .
<JJ. /
stringJJ/ 5
>JJ5 6
(JJ6 7
typeJJ7 ;
:JJ; <
$strJJ= T
,JJT U
	maxLengthJJV _
:JJ_ `
$numJJa c
,JJc d
nullableJJe m
:JJm n
falseJJo t
)JJt u
,JJu v
ServiceDescriptionKK &
=KK' (
tableKK) .
.KK. /
ColumnKK/ 5
<KK5 6
stringKK6 <
>KK< =
(KK= >
typeKK> B
:KKB C
$strKKD ]
,KK] ^
	maxLengthKK_ h
:KKh i
$numKKj n
,KKn o
nullableKKp x
:KKx y
falseKKz 
)	KK Ä
,
KKÄ Å
ServiceDurationLL #
=LL$ %
tableLL& +
.LL+ ,
ColumnLL, 2
<LL2 3
intLL3 6
>LL6 7
(LL7 8
typeLL8 <
:LL< =
$strLL> G
,LLG H
nullableLLI Q
:LLQ R
falseLLS X
)LLX Y
,LLY Z
ServicePriceMM  
=MM! "
tableMM# (
.MM( )
ColumnMM) /
<MM/ 0
decimalMM0 7
>MM7 8
(MM8 9
typeMM9 =
:MM= >
$strMM? N
,MMN O
nullableMMP X
:MMX Y
falseMMZ _
)MM_ `
}NN 
,NN 
constraintsOO 
:OO 
tableOO "
=>OO# %
{PP 
tableQQ 
.QQ 

PrimaryKeyQQ $
(QQ$ %
$strQQ% 2
,QQ2 3
xQQ4 5
=>QQ6 8
xQQ9 :
.QQ: ;
IdQQ; =
)QQ= >
;QQ> ?
}RR 
)RR 
;RR 
migrationBuilderTT 
.TT 
CreateTableTT (
(TT( )
nameUU 
:UU 
$strUU (
,UU( )
columnsVV 
:VV 
tableVV 
=>VV !
newVV" %
{WW 
IdXX 
=XX 
tableXX 
.XX 
ColumnXX %
<XX% &
intXX& )
>XX) *
(XX* +
typeXX+ /
:XX/ 0
$strXX1 :
,XX: ;
nullableXX< D
:XXD E
falseXXF K
)XXK L
.YY 

AnnotationYY #
(YY# $
$strYY$ D
,YYD E)
NpgsqlValueGenerationStrategyYYF c
.YYc d#
IdentityByDefaultColumnYYd {
)YY{ |
,YY| }
RoleIdZZ 
=ZZ 
tableZZ "
.ZZ" #
ColumnZZ# )
<ZZ) *
stringZZ* 0
>ZZ0 1
(ZZ1 2
typeZZ2 6
:ZZ6 7
$strZZ8 >
,ZZ> ?
nullableZZ@ H
:ZZH I
falseZZJ O
)ZZO P
,ZZP Q
	ClaimType[[ 
=[[ 
table[[  %
.[[% &
Column[[& ,
<[[, -
string[[- 3
>[[3 4
([[4 5
type[[5 9
:[[9 :
$str[[; A
,[[A B
nullable[[C K
:[[K L
true[[M Q
)[[Q R
,[[R S

ClaimValue\\ 
=\\  
table\\! &
.\\& '
Column\\' -
<\\- .
string\\. 4
>\\4 5
(\\5 6
type\\6 :
:\\: ;
$str\\< B
,\\B C
nullable\\D L
:\\L M
true\\N R
)\\R S
}]] 
,]] 
constraints^^ 
:^^ 
table^^ "
=>^^# %
{__ 
table`` 
.`` 

PrimaryKey`` $
(``$ %
$str``% :
,``: ;
x``< =
=>``> @
x``A B
.``B C
Id``C E
)``E F
;``F G
tableaa 
.aa 

ForeignKeyaa $
(aa$ %
namebb 
:bb 
$strbb F
,bbF G
columncc 
:cc 
xcc  !
=>cc" $
xcc% &
.cc& '
RoleIdcc' -
,cc- .
principalTabledd &
:dd& '
$strdd( 5
,dd5 6
principalColumnee '
:ee' (
$stree) -
,ee- .
onDeleteff  
:ff  !
ReferentialActionff" 3
.ff3 4
Cascadeff4 ;
)ff; <
;ff< =
}gg 
)gg 
;gg 
migrationBuilderii 
.ii 
CreateTableii (
(ii( )
namejj 
:jj 
$strjj (
,jj( )
columnskk 
:kk 
tablekk 
=>kk !
newkk" %
{ll 
Idmm 
=mm 
tablemm 
.mm 
Columnmm %
<mm% &
intmm& )
>mm) *
(mm* +
typemm+ /
:mm/ 0
$strmm1 :
,mm: ;
nullablemm< D
:mmD E
falsemmF K
)mmK L
.nn 

Annotationnn #
(nn# $
$strnn$ D
,nnD E)
NpgsqlValueGenerationStrategynnF c
.nnc d#
IdentityByDefaultColumnnnd {
)nn{ |
,nn| }
UserIdoo 
=oo 
tableoo "
.oo" #
Columnoo# )
<oo) *
stringoo* 0
>oo0 1
(oo1 2
typeoo2 6
:oo6 7
$stroo8 >
,oo> ?
nullableoo@ H
:ooH I
falseooJ O
)ooO P
,ooP Q
	ClaimTypepp 
=pp 
tablepp  %
.pp% &
Columnpp& ,
<pp, -
stringpp- 3
>pp3 4
(pp4 5
typepp5 9
:pp9 :
$strpp; A
,ppA B
nullableppC K
:ppK L
trueppM Q
)ppQ R
,ppR S

ClaimValueqq 
=qq  
tableqq! &
.qq& '
Columnqq' -
<qq- .
stringqq. 4
>qq4 5
(qq5 6
typeqq6 :
:qq: ;
$strqq< B
,qqB C
nullableqqD L
:qqL M
trueqqN R
)qqR S
}rr 
,rr 
constraintsss 
:ss 
tabless "
=>ss# %
{tt 
tableuu 
.uu 

PrimaryKeyuu $
(uu$ %
$struu% :
,uu: ;
xuu< =
=>uu> @
xuuA B
.uuB C
IduuC E
)uuE F
;uuF G
tablevv 
.vv 

ForeignKeyvv $
(vv$ %
nameww 
:ww 
$strww F
,wwF G
columnxx 
:xx 
xxx  !
=>xx" $
xxx% &
.xx& '
UserIdxx' -
,xx- .
principalTableyy &
:yy& '
$stryy( 5
,yy5 6
principalColumnzz '
:zz' (
$strzz) -
,zz- .
onDelete{{  
:{{  !
ReferentialAction{{" 3
.{{3 4
Cascade{{4 ;
){{; <
;{{< =
}|| 
)|| 
;|| 
migrationBuilder~~ 
.~~ 
CreateTable~~ (
(~~( )
name 
: 
$str (
,( )
columns
ÄÄ 
:
ÄÄ 
table
ÄÄ 
=>
ÄÄ !
new
ÄÄ" %
{
ÅÅ 
LoginProvider
ÇÇ !
=
ÇÇ" #
table
ÇÇ$ )
.
ÇÇ) *
Column
ÇÇ* 0
<
ÇÇ0 1
string
ÇÇ1 7
>
ÇÇ7 8
(
ÇÇ8 9
type
ÇÇ9 =
:
ÇÇ= >
$str
ÇÇ? W
,
ÇÇW X
	maxLength
ÇÇY b
:
ÇÇb c
$num
ÇÇd g
,
ÇÇg h
nullable
ÇÇi q
:
ÇÇq r
false
ÇÇs x
)
ÇÇx y
,
ÇÇy z
ProviderKey
ÉÉ 
=
ÉÉ  !
table
ÉÉ" '
.
ÉÉ' (
Column
ÉÉ( .
<
ÉÉ. /
string
ÉÉ/ 5
>
ÉÉ5 6
(
ÉÉ6 7
type
ÉÉ7 ;
:
ÉÉ; <
$str
ÉÉ= U
,
ÉÉU V
	maxLength
ÉÉW `
:
ÉÉ` a
$num
ÉÉb e
,
ÉÉe f
nullable
ÉÉg o
:
ÉÉo p
false
ÉÉq v
)
ÉÉv w
,
ÉÉw x!
ProviderDisplayName
ÑÑ '
=
ÑÑ( )
table
ÑÑ* /
.
ÑÑ/ 0
Column
ÑÑ0 6
<
ÑÑ6 7
string
ÑÑ7 =
>
ÑÑ= >
(
ÑÑ> ?
type
ÑÑ? C
:
ÑÑC D
$str
ÑÑE K
,
ÑÑK L
nullable
ÑÑM U
:
ÑÑU V
true
ÑÑW [
)
ÑÑ[ \
,
ÑÑ\ ]
UserId
ÖÖ 
=
ÖÖ 
table
ÖÖ "
.
ÖÖ" #
Column
ÖÖ# )
<
ÖÖ) *
string
ÖÖ* 0
>
ÖÖ0 1
(
ÖÖ1 2
type
ÖÖ2 6
:
ÖÖ6 7
$str
ÖÖ8 >
,
ÖÖ> ?
nullable
ÖÖ@ H
:
ÖÖH I
false
ÖÖJ O
)
ÖÖO P
}
ÜÜ 
,
ÜÜ 
constraints
áá 
:
áá 
table
áá "
=>
áá# %
{
àà 
table
ââ 
.
ââ 

PrimaryKey
ââ $
(
ââ$ %
$str
ââ% :
,
ââ: ;
x
ââ< =
=>
ââ> @
new
ââA D
{
ââE F
x
ââG H
.
ââH I
LoginProvider
ââI V
,
ââV W
x
ââX Y
.
ââY Z
ProviderKey
ââZ e
}
ââf g
)
ââg h
;
ââh i
table
ää 
.
ää 

ForeignKey
ää $
(
ää$ %
name
ãã 
:
ãã 
$str
ãã F
,
ããF G
column
åå 
:
åå 
x
åå  !
=>
åå" $
x
åå% &
.
åå& '
UserId
åå' -
,
åå- .
principalTable
çç &
:
çç& '
$str
çç( 5
,
çç5 6
principalColumn
éé '
:
éé' (
$str
éé) -
,
éé- .
onDelete
èè  
:
èè  !
ReferentialAction
èè" 3
.
èè3 4
Cascade
èè4 ;
)
èè; <
;
èè< =
}
êê 
)
êê 
;
êê 
migrationBuilder
íí 
.
íí 
CreateTable
íí (
(
íí( )
name
ìì 
:
ìì 
$str
ìì '
,
ìì' (
columns
îî 
:
îî 
table
îî 
=>
îî !
new
îî" %
{
ïï 
UserId
ññ 
=
ññ 
table
ññ "
.
ññ" #
Column
ññ# )
<
ññ) *
string
ññ* 0
>
ññ0 1
(
ññ1 2
type
ññ2 6
:
ññ6 7
$str
ññ8 >
,
ññ> ?
nullable
ññ@ H
:
ññH I
false
ññJ O
)
ññO P
,
ññP Q
RoleId
óó 
=
óó 
table
óó "
.
óó" #
Column
óó# )
<
óó) *
string
óó* 0
>
óó0 1
(
óó1 2
type
óó2 6
:
óó6 7
$str
óó8 >
,
óó> ?
nullable
óó@ H
:
óóH I
false
óóJ O
)
óóO P
}
òò 
,
òò 
constraints
ôô 
:
ôô 
table
ôô "
=>
ôô# %
{
öö 
table
õõ 
.
õõ 

PrimaryKey
õõ $
(
õõ$ %
$str
õõ% 9
,
õõ9 :
x
õõ; <
=>
õõ= ?
new
õõ@ C
{
õõD E
x
õõF G
.
õõG H
UserId
õõH N
,
õõN O
x
õõP Q
.
õõQ R
RoleId
õõR X
}
õõY Z
)
õõZ [
;
õõ[ \
table
úú 
.
úú 

ForeignKey
úú $
(
úú$ %
name
ùù 
:
ùù 
$str
ùù E
,
ùùE F
column
ûû 
:
ûû 
x
ûû  !
=>
ûû" $
x
ûû% &
.
ûû& '
RoleId
ûû' -
,
ûû- .
principalTable
üü &
:
üü& '
$str
üü( 5
,
üü5 6
principalColumn
†† '
:
††' (
$str
††) -
,
††- .
onDelete
°°  
:
°°  !
ReferentialAction
°°" 3
.
°°3 4
Cascade
°°4 ;
)
°°; <
;
°°< =
table
¢¢ 
.
¢¢ 

ForeignKey
¢¢ $
(
¢¢$ %
name
££ 
:
££ 
$str
££ E
,
££E F
column
§§ 
:
§§ 
x
§§  !
=>
§§" $
x
§§% &
.
§§& '
UserId
§§' -
,
§§- .
principalTable
•• &
:
••& '
$str
••( 5
,
••5 6
principalColumn
¶¶ '
:
¶¶' (
$str
¶¶) -
,
¶¶- .
onDelete
ßß  
:
ßß  !
ReferentialAction
ßß" 3
.
ßß3 4
Cascade
ßß4 ;
)
ßß; <
;
ßß< =
}
®® 
)
®® 
;
®® 
migrationBuilder
™™ 
.
™™ 
CreateTable
™™ (
(
™™( )
name
´´ 
:
´´ 
$str
´´ (
,
´´( )
columns
¨¨ 
:
¨¨ 
table
¨¨ 
=>
¨¨ !
new
¨¨" %
{
≠≠ 
UserId
ÆÆ 
=
ÆÆ 
table
ÆÆ "
.
ÆÆ" #
Column
ÆÆ# )
<
ÆÆ) *
string
ÆÆ* 0
>
ÆÆ0 1
(
ÆÆ1 2
type
ÆÆ2 6
:
ÆÆ6 7
$str
ÆÆ8 >
,
ÆÆ> ?
nullable
ÆÆ@ H
:
ÆÆH I
false
ÆÆJ O
)
ÆÆO P
,
ÆÆP Q
LoginProvider
ØØ !
=
ØØ" #
table
ØØ$ )
.
ØØ) *
Column
ØØ* 0
<
ØØ0 1
string
ØØ1 7
>
ØØ7 8
(
ØØ8 9
type
ØØ9 =
:
ØØ= >
$str
ØØ? W
,
ØØW X
	maxLength
ØØY b
:
ØØb c
$num
ØØd g
,
ØØg h
nullable
ØØi q
:
ØØq r
false
ØØs x
)
ØØx y
,
ØØy z
Name
∞∞ 
=
∞∞ 
table
∞∞  
.
∞∞  !
Column
∞∞! '
<
∞∞' (
string
∞∞( .
>
∞∞. /
(
∞∞/ 0
type
∞∞0 4
:
∞∞4 5
$str
∞∞6 N
,
∞∞N O
	maxLength
∞∞P Y
:
∞∞Y Z
$num
∞∞[ ^
,
∞∞^ _
nullable
∞∞` h
:
∞∞h i
false
∞∞j o
)
∞∞o p
,
∞∞p q
Value
±± 
=
±± 
table
±± !
.
±±! "
Column
±±" (
<
±±( )
string
±±) /
>
±±/ 0
(
±±0 1
type
±±1 5
:
±±5 6
$str
±±7 =
,
±±= >
nullable
±±? G
:
±±G H
true
±±I M
)
±±M N
}
≤≤ 
,
≤≤ 
constraints
≥≥ 
:
≥≥ 
table
≥≥ "
=>
≥≥# %
{
¥¥ 
table
µµ 
.
µµ 

PrimaryKey
µµ $
(
µµ$ %
$str
µµ% :
,
µµ: ;
x
µµ< =
=>
µµ> @
new
µµA D
{
µµE F
x
µµG H
.
µµH I
UserId
µµI O
,
µµO P
x
µµQ R
.
µµR S
LoginProvider
µµS `
,
µµ` a
x
µµb c
.
µµc d
Name
µµd h
}
µµi j
)
µµj k
;
µµk l
table
∂∂ 
.
∂∂ 

ForeignKey
∂∂ $
(
∂∂$ %
name
∑∑ 
:
∑∑ 
$str
∑∑ F
,
∑∑F G
column
∏∏ 
:
∏∏ 
x
∏∏  !
=>
∏∏" $
x
∏∏% &
.
∏∏& '
UserId
∏∏' -
,
∏∏- .
principalTable
ππ &
:
ππ& '
$str
ππ( 5
,
ππ5 6
principalColumn
∫∫ '
:
∫∫' (
$str
∫∫) -
,
∫∫- .
onDelete
ªª  
:
ªª  !
ReferentialAction
ªª" 3
.
ªª3 4
Cascade
ªª4 ;
)
ªª; <
;
ªª< =
}
ºº 
)
ºº 
;
ºº 
migrationBuilder
ææ 
.
ææ 
CreateTable
ææ (
(
ææ( )
name
øø 
:
øø 
$str
øø $
,
øø$ %
columns
¿¿ 
:
¿¿ 
table
¿¿ 
=>
¿¿ !
new
¿¿" %
{
¡¡ 
Id
¬¬ 
=
¬¬ 
table
¬¬ 
.
¬¬ 
Column
¬¬ %
<
¬¬% &
int
¬¬& )
>
¬¬) *
(
¬¬* +
type
¬¬+ /
:
¬¬/ 0
$str
¬¬1 :
,
¬¬: ;
nullable
¬¬< D
:
¬¬D E
false
¬¬F K
)
¬¬K L
.
√√ 

Annotation
√√ #
(
√√# $
$str
√√$ D
,
√√D E+
NpgsqlValueGenerationStrategy
√√F c
.
√√c d%
IdentityByDefaultColumn
√√d {
)
√√{ |
,
√√| }
AppointmentDate
ƒƒ #
=
ƒƒ$ %
table
ƒƒ& +
.
ƒƒ+ ,
Column
ƒƒ, 2
<
ƒƒ2 3
DateTime
ƒƒ3 ;
>
ƒƒ; <
(
ƒƒ< =
type
ƒƒ= A
:
ƒƒA B
$str
ƒƒC `
,
ƒƒ` a
nullable
ƒƒb j
:
ƒƒj k
false
ƒƒl q
)
ƒƒq r
,
ƒƒr s
Customer_Id
≈≈ 
=
≈≈  !
table
≈≈" '
.
≈≈' (
Column
≈≈( .
<
≈≈. /
int
≈≈/ 2
>
≈≈2 3
(
≈≈3 4
type
≈≈4 8
:
≈≈8 9
$str
≈≈: C
,
≈≈C D
nullable
≈≈E M
:
≈≈M N
false
≈≈O T
)
≈≈T U
,
≈≈U V

Service_Id
∆∆ 
=
∆∆  
table
∆∆! &
.
∆∆& '
Column
∆∆' -
<
∆∆- .
int
∆∆. 1
>
∆∆1 2
(
∆∆2 3
type
∆∆3 7
:
∆∆7 8
$str
∆∆9 B
,
∆∆B C
nullable
∆∆D L
:
∆∆L M
false
∆∆N S
)
∆∆S T
}
«« 
,
«« 
constraints
»» 
:
»» 
table
»» "
=>
»»# %
{
…… 
table
   
.
   

PrimaryKey
   $
(
  $ %
$str
  % 6
,
  6 7
x
  8 9
=>
  : <
x
  = >
.
  > ?
Id
  ? A
)
  A B
;
  B C
table
ÀÀ 
.
ÀÀ 

ForeignKey
ÀÀ $
(
ÀÀ$ %
name
ÃÃ 
:
ÃÃ 
$str
ÃÃ E
,
ÃÃE F
column
ÕÕ 
:
ÕÕ 
x
ÕÕ  !
=>
ÕÕ" $
x
ÕÕ% &
.
ÕÕ& '
Customer_Id
ÕÕ' 2
,
ÕÕ2 3
principalTable
ŒŒ &
:
ŒŒ& '
$str
ŒŒ( 3
,
ŒŒ3 4
principalColumn
œœ '
:
œœ' (
$str
œœ) -
,
œœ- .
onDelete
––  
:
––  !
ReferentialAction
––" 3
.
––3 4
Cascade
––4 ;
)
––; <
;
––< =
table
—— 
.
—— 

ForeignKey
—— $
(
——$ %
name
““ 
:
““ 
$str
““ C
,
““C D
column
”” 
:
”” 
x
””  !
=>
””" $
x
””% &
.
””& '

Service_Id
””' 1
,
””1 2
principalTable
‘‘ &
:
‘‘& '
$str
‘‘( 2
,
‘‘2 3
principalColumn
’’ '
:
’’' (
$str
’’) -
,
’’- .
onDelete
÷÷  
:
÷÷  !
ReferentialAction
÷÷" 3
.
÷÷3 4
Cascade
÷÷4 ;
)
÷÷; <
;
÷÷< =
}
◊◊ 
)
◊◊ 
;
◊◊ 
migrationBuilder
ŸŸ 
.
ŸŸ 
CreateIndex
ŸŸ (
(
ŸŸ( )
name
⁄⁄ 
:
⁄⁄ 
$str
⁄⁄ 3
,
⁄⁄3 4
table
€€ 
:
€€ 
$str
€€ %
,
€€% &
column
‹‹ 
:
‹‹ 
$str
‹‹ %
)
‹‹% &
;
‹‹& '
migrationBuilder
ﬁﬁ 
.
ﬁﬁ 
CreateIndex
ﬁﬁ (
(
ﬁﬁ( )
name
ﬂﬂ 
:
ﬂﬂ 
$str
ﬂﬂ 2
,
ﬂﬂ2 3
table
‡‡ 
:
‡‡ 
$str
‡‡ %
,
‡‡% &
column
·· 
:
·· 
$str
·· $
)
··$ %
;
··% &
migrationBuilder
„„ 
.
„„ 
CreateIndex
„„ (
(
„„( )
name
‰‰ 
:
‰‰ 
$str
‰‰ 2
,
‰‰2 3
table
ÂÂ 
:
ÂÂ 
$str
ÂÂ )
,
ÂÂ) *
column
ÊÊ 
:
ÊÊ 
$str
ÊÊ  
)
ÊÊ  !
;
ÊÊ! "
migrationBuilder
ËË 
.
ËË 
CreateIndex
ËË (
(
ËË( )
name
ÈÈ 
:
ÈÈ 
$str
ÈÈ %
,
ÈÈ% &
table
ÍÍ 
:
ÍÍ 
$str
ÍÍ $
,
ÍÍ$ %
column
ÎÎ 
:
ÎÎ 
$str
ÎÎ (
,
ÎÎ( )
unique
ÏÏ 
:
ÏÏ 
true
ÏÏ 
)
ÏÏ 
;
ÏÏ 
migrationBuilder
ÓÓ 
.
ÓÓ 
CreateIndex
ÓÓ (
(
ÓÓ( )
name
ÔÔ 
:
ÔÔ 
$str
ÔÔ 2
,
ÔÔ2 3
table
 
:
 
$str
 )
,
) *
column
ÒÒ 
:
ÒÒ 
$str
ÒÒ  
)
ÒÒ  !
;
ÒÒ! "
migrationBuilder
ÛÛ 
.
ÛÛ 
CreateIndex
ÛÛ (
(
ÛÛ( )
name
ÙÙ 
:
ÙÙ 
$str
ÙÙ 2
,
ÙÙ2 3
table
ıı 
:
ıı 
$str
ıı )
,
ıı) *
column
ˆˆ 
:
ˆˆ 
$str
ˆˆ  
)
ˆˆ  !
;
ˆˆ! "
migrationBuilder
¯¯ 
.
¯¯ 
CreateIndex
¯¯ (
(
¯¯( )
name
˘˘ 
:
˘˘ 
$str
˘˘ 1
,
˘˘1 2
table
˙˙ 
:
˙˙ 
$str
˙˙ (
,
˙˙( )
column
˚˚ 
:
˚˚ 
$str
˚˚  
)
˚˚  !
;
˚˚! "
migrationBuilder
˝˝ 
.
˝˝ 
CreateIndex
˝˝ (
(
˝˝( )
name
˛˛ 
:
˛˛ 
$str
˛˛ "
,
˛˛" #
table
ˇˇ 
:
ˇˇ 
$str
ˇˇ $
,
ˇˇ$ %
column
ÄÄ 
:
ÄÄ 
$str
ÄÄ )
)
ÄÄ) *
;
ÄÄ* +
migrationBuilder
ÇÇ 
.
ÇÇ 
CreateIndex
ÇÇ (
(
ÇÇ( )
name
ÉÉ 
:
ÉÉ 
$str
ÉÉ %
,
ÉÉ% &
table
ÑÑ 
:
ÑÑ 
$str
ÑÑ $
,
ÑÑ$ %
column
ÖÖ 
:
ÖÖ 
$str
ÖÖ ,
,
ÖÖ, -
unique
ÜÜ 
:
ÜÜ 
true
ÜÜ 
)
ÜÜ 
;
ÜÜ 
}
áá 	
	protected
ââ 
override
ââ 
void
ââ 
Down
ââ  $
(
ââ$ %
MigrationBuilder
ââ% 5
migrationBuilder
ââ6 F
)
ââF G
{
ää 	
migrationBuilder
ãã 
.
ãã 
	DropTable
ãã &
(
ãã& '
name
åå 
:
åå 
$str
åå $
)
åå$ %
;
åå% &
migrationBuilder
éé 
.
éé 
	DropTable
éé &
(
éé& '
name
èè 
:
èè 
$str
èè (
)
èè( )
;
èè) *
migrationBuilder
ëë 
.
ëë 
	DropTable
ëë &
(
ëë& '
name
íí 
:
íí 
$str
íí (
)
íí( )
;
íí) *
migrationBuilder
îî 
.
îî 
	DropTable
îî &
(
îî& '
name
ïï 
:
ïï 
$str
ïï (
)
ïï( )
;
ïï) *
migrationBuilder
óó 
.
óó 
	DropTable
óó &
(
óó& '
name
òò 
:
òò 
$str
òò '
)
òò' (
;
òò( )
migrationBuilder
öö 
.
öö 
	DropTable
öö &
(
öö& '
name
õõ 
:
õõ 
$str
õõ (
)
õõ( )
;
õõ) *
migrationBuilder
ùù 
.
ùù 
	DropTable
ùù &
(
ùù& '
name
ûû 
:
ûû 
$str
ûû !
)
ûû! "
;
ûû" #
migrationBuilder
†† 
.
†† 
	DropTable
†† &
(
††& '
name
°° 
:
°° 
$str
°°  
)
°°  !
;
°°! "
migrationBuilder
££ 
.
££ 
	DropTable
££ &
(
££& '
name
§§ 
:
§§ 
$str
§§ #
)
§§# $
;
§§$ %
migrationBuilder
¶¶ 
.
¶¶ 
	DropTable
¶¶ &
(
¶¶& '
name
ßß 
:
ßß 
$str
ßß #
)
ßß# $
;
ßß$ %
}
®® 	
}
©© 
}™™ ß
ÉC:\Users\giwrg\OneDrive\Desktop\ICT\Semester3\DeusBarberShopService\Deus_DataAccessLayer\Migrations\20210530092450_EmailOptional.cs
	namespace 	 
Deus_DataAccessLayer
 
. 

Migrations )
{ 
public 

partial 
class 
EmailOptional &
:' (
	Migration) 2
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder		 
.		 
AlterColumn		 (
<		( )
string		) /
>		/ 0
(		0 1
name

 
:

 
$str

 $
,

$ %
table 
: 
$str "
," #
type 
: 
$str .
,. /
	maxLength 
: 
$num 
, 
nullable 
: 
true 
, 

oldClrType 
: 
typeof "
(" #
string# )
)) *
,* +
oldType 
: 
$str 1
,1 2
oldMaxLength 
: 
$num !
)! "
;" #
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 
AlterColumn (
<( )
string) /
>/ 0
(0 1
name 
: 
$str $
,$ %
table 
: 
$str "
," #
type 
: 
$str .
,. /
	maxLength 
: 
$num 
, 
nullable 
: 
false 
,  
defaultValue 
: 
$str  
,  !

oldClrType 
: 
typeof "
(" #
string# )
)) *
,* +
oldType 
: 
$str 1
,1 2
oldMaxLength 
: 
$num !
,! "
oldNullable   
:   
true   !
)  ! "
;  " #
}!! 	
}"" 
}## ´?
~C:\Users\giwrg\OneDrive\Desktop\ICT\Semester3\DeusBarberShopService\Deus_DataAccessLayer\Repositories\AppointmentRepository.cs
	namespace 	 
Deus_DataAccessLayer
 
. 
Services '
{ 
public 

class !
AppointmentRepository &
:' ("
IAppointmentRepository) ?
{ 
private 
readonly  
ApplicationDbContext -
_db. 1
;1 2
public !
AppointmentRepository $
($ % 
ApplicationDbContext% 9
db: <
)< =
{ 	
_db 
= 
db 
; 
} 	
public 
async 
Task 
< 
IList 
<  
Appointment  +
>+ ,
>, -
GetAll. 4
(4 5
)5 6
{ 	
List 
< 
Appointment 
> 
appointments *
=+ ,
await 
_db 
. 
Appointments %
. 
AsNoTracking %
(% &
)& '
. 
Include  
(  !
c! "
=># %
c& '
.' (
Customer( 0
)0 1
. 
AsNoTracking %
(% &
)& '
. 
Include  
(  !
s! "
=># %
s& '
.' (
Service( /
)/ 0
. 
OrderByDescending +
(+ ,
x, -
=>- /
x/ 0
.0 1
AppointmentDate1 @
)@ A
. 
ToListAsync $
($ %
)% &
;& '
return 
appointments 
;  
}   	
public"" 
async"" 
Task"" 
<"" 
Appointment"" %
>""% &
GetById""' .
("". /
int""/ 2
id""3 5
)""5 6
{## 	
var$$ 
appointment$$ 
=$$ 
await$$ #
_db$$$ '
.$$' (
Appointments$$( 4
.%% 
AsNoTracking%% &
(%%& '
)%%' (
.&& 
Include&& !
(&&! "
c&&" #
=>&&$ &
c&&' (
.&&( )
Customer&&) 1
)&&1 2
.'' 
AsNoTracking'' &
(''& '
)''' (
.(( 
Include(( !
(((! "
s((" #
=>(($ &
s((' (
.((( )
Service(() 0
)((0 1
.)) 
FirstOrDefaultAsync)) -
())- .
a)). /
=>))0 2
a))3 4
.))4 5
Id))5 7
==))8 :
id)); =
)))= >
;))> ?
return** 
appointment** 
;** 
}++ 	
public,, 
async,, 
Task,, 
<,, 
Appointment,, %
>,,% &
CreateUpdate,,' 3
(,,3 4
Appointment,,4 ?
entity,,@ F
),,F G
{-- 	
if.. 
(.. 
entity.. 
... 
Id.. 
<.. 
$num.. 
).. 
{// 
try00 
{11 
await22 
_db22 
.22 
Appointments22 *
.22* +
AddAsync22+ 3
(223 4
entity224 :
)22: ;
;22; <
if33 
(33 
!33 
await33 
SaveChanges33 *
(33* +
)33+ ,
)33, -
{44 
return55 
null55 #
;55# $
}66 
var88 
appointmentInfo88 '
=88( )
await88* /
GetAppointmentInfo880 B
(88B C
entity88C I
.88I J
Id88J L
)88L M
;88M N
return:: 
appointmentInfo:: *
;::* +
};; 
catch<< 
(<< 
	Exception<<  
)<<  !
{== 
return>> 
null>> 
;>>  
}?? 
}@@ 
elseAA 
{BB 
_dbCC 
.CC 
AppointmentsCC  
.CC  !
UpdateCC! '
(CC' (
entityCC( .
)CC. /
;CC/ 0
ifDD 
(DD 
!DD 
awaitDD 
SaveChangesDD &
(DD& '
)DD' (
)DD( )
{EE 
returnFF 
nullFF 
;FF  
}GG 
varII 
appointmentInfoII #
=II$ %
awaitII& +
GetAppointmentInfoII, >
(II> ?
entityII? E
.IIE F
IdIIF H
)IIH I
;III J
returnKK 
appointmentInfoKK &
;KK& '
}LL 
}NN 	
publicPP 
asyncPP 
TaskPP 
<PP 
boolPP 
>PP 
DeletePP  &
(PP& '
AppointmentPP' 2
entityPP3 9
)PP9 :
{QQ 	
_dbRR 
.RR 
AppointmentsRR 
.RR 
RemoveRR #
(RR# $
entityRR$ *
)RR* +
;RR+ ,
returnSS 
awaitSS 
SaveChangesSS $
(SS$ %
)SS% &
;SS& '
}TT 	
publicVV 
asyncVV 
TaskVV 
<VV 
boolVV 
>VV 
SaveChangesVV  +
(VV+ ,
)VV, -
{WW 	
varXX 
changesXX 
=XX 
awaitXX 
_dbXX  #
.XX# $
SaveChangesAsyncXX$ 4
(XX4 5
)XX5 6
;XX6 7
returnYY 
changesYY 
>YY 
$numYY 
;YY 
}ZZ 	
public[[ 
async[[ 
Task[[ 
<[[ 
bool[[ 
>[[ 
IsExists[[  (
([[( )
int[[) ,
id[[- /
)[[/ 0
{\\ 	
var]] 
isExists]] 
=]] 
await]]  
_db]]! $
.]]$ %
Appointments]]% 1
.]]1 2
AnyAsync]]2 :
(]]: ;
p]]; <
=>]]= ?
p]]@ A
.]]A B
Id]]B D
==]]E G
id]]H J
)]]J K
;]]K L
return^^ 
isExists^^ 
;^^ 
}__ 	
publicaa 
asyncaa 
Taskaa 
<aa 
boolaa 
>aa 
IsDateTimeAvailableaa  3
(aa3 4
DateTimeaa4 <
dateTimeaa= E
)aaE F
{bb 	
varcc 
isDateTimeAvailablecc #
=cc$ %
awaitcc& +
_dbcc, /
.cc/ 0
Appointmentscc0 <
.cc< =
AnyAsynccc= E
(ccE F
accF G
=>ccH J
accK L
.ccL M
AppointmentDateccM \
==cc] _
dateTimecc` h
)cch i
;cci j
returndd 
isDateTimeAvailabledd &
;dd& '
}ee 	
privateff 
asyncff 
Taskff 
<ff 
Appointmentff &
>ff& '
GetAppointmentInfoff( :
(ff: ;
intff; >
idff? A
)ffA B
{gg 	
varii 
appointmentInfoii 
=ii  !
awaitii" '
_dbii( +
.ii+ ,
Appointmentsii, 8
.jj 
Includejj %
(jj% &
cjj& '
=>jj( *
cjj+ ,
.jj, -
Customerjj- 5
)jj5 6
.kk 
Includekk %
(kk% &
skk& '
=>kk( *
skk+ ,
.kk, -
Servicekk- 4
)kk4 5
.ll 
FirstOrDefaultAsyncll 1
(ll1 2
all2 3
=>ll4 6
all7 8
.ll8 9
Idll9 ;
==ll< >
idll? A
)llA B
;llB C
returnnn 
appointmentInfonn "
;nn" #
}oo 	
}pp 
}qq ≥&
{C:\Users\giwrg\OneDrive\Desktop\ICT\Semester3\DeusBarberShopService\Deus_DataAccessLayer\Repositories\CustomerRepository.cs
	namespace 	 
Deus_DataAccessLayer
 
. 
Services '
{ 
public 

class 
CustomerRepository #
:$ %
ICustomerRepository& 9
{ 
private 
readonly  
ApplicationDbContext -
_db. 1
;1 2
public 
CustomerRepository !
(! " 
ApplicationDbContext" 6
db7 9
)9 :
{ 	
_db 
= 
db 
; 
} 	
public 
async 
Task 
< 
IList 
<  
Customer  (
>( )
>) *
GetAll+ 1
(1 2
)2 3
{ 	
var 
	customers 
= 
await !
_db" %
.% &
	Customers& /
. 
ToListAsync (
(( )
)) *
;* +
return 
	customers 
; 
} 	
public 
async 
Task 
< 
Customer "
>" #
GetById$ +
(+ ,
int, /
id0 2
)2 3
{ 	
var 
customer 
= 
await  
_db! $
.$ %
	Customers% .
.. /
FirstOrDefaultAsync/ B
(B C
cC D
=>E G
cH I
.I J
IdJ L
==M O
idP R
)R S
;S T
return 
customer 
; 
}   	
public"" 
async"" 
Task"" 
<"" 
Customer"" "
>""" #
CreateUpdate""$ 0
(""0 1
Customer""1 9
entity"": @
)""@ A
{## 	
if$$ 
($$ 
entity$$ 
.$$ 
Id$$ 
<$$ 
$num$$ 
)$$ 
{%% 
try&& 
{'' 
await(( 
_db(( 
.(( 
	Customers(( '
.((' (
AddAsync((( 0
(((0 1
entity((1 7
)((7 8
;((8 9
if)) 
()) 
!)) 
await)) 
SaveChanges)) *
())* +
)))+ ,
))), -
{** 
return++ 
null++ #
;++# $
},, 
return-- 
entity-- !
;--! "
}.. 
catch// 
(// 
	Exception//  
)//  !
{00 
return11 
null11 
;11  
}22 
}33 
else44 
{55 
_db66 
.66 
	Customers66 
.66 
Update66 $
(66$ %
entity66% +
)66+ ,
;66, -
if77 
(77 
!77 
await77 
SaveChanges77 &
(77& '
)77' (
)77( )
{88 
return99 
null99 
;99  
}:: 
return;; 
entity;; 
;;; 
}<< 
}== 	
public?? 
async?? 
Task?? 
<?? 
bool?? 
>?? 
Delete??  &
(??& '
Customer??' /
entity??0 6
)??6 7
{@@ 	
_dbAA 
.AA 
	CustomersAA 
.AA 
RemoveAA  
(AA  !
entityAA! '
)AA' (
;AA( )
returnBB 
awaitBB 
SaveChangesBB $
(BB$ %
)BB% &
;BB& '
}CC 	
publicEE 
asyncEE 
TaskEE 
<EE 
boolEE 
>EE 
SaveChangesEE  +
(EE+ ,
)EE, -
{FF 	
varGG 
changesGG 
=GG 
awaitGG 
_dbGG  #
.GG# $
SaveChangesAsyncGG$ 4
(GG4 5
)GG5 6
;GG6 7
returnHH 
changesHH 
>HH 
$numHH 
;HH 
}II 	
publicJJ 
asyncJJ 
TaskJJ 
<JJ 
boolJJ 
>JJ 
IsExistsJJ  (
(JJ( )
intJJ) ,
idJJ- /
)JJ/ 0
{KK 	
varLL 
isExistsLL 
=LL 
awaitLL  
_dbLL! $
.LL$ %
	CustomersLL% .
.LL. /
AnyAsyncLL/ 7
(LL7 8
pLL8 9
=>LL: <
pLL= >
.LL> ?
IdLL? A
==LLB D
idLLE G
)LLG H
;LLH I
returnMM 
isExistsMM 
;MM 
}NN 	
}OO 
}PP Ì%
zC:\Users\giwrg\OneDrive\Desktop\ICT\Semester3\DeusBarberShopService\Deus_DataAccessLayer\Repositories\ServiceRepository.cs
	namespace 	 
Deus_DataAccessLayer
 
. 
Services '
{ 
public 

class 
ServiceRepository "
:# $
IServiceRepository% 7
{ 
private 
readonly  
ApplicationDbContext -
_db. 1
;1 2
public 
ServiceRepository  
(  ! 
ApplicationDbContext! 5
db6 8
)8 9
{ 	
_db 
= 
db 
; 
} 	
public 
async 
Task 
< 
IList 
<  
Service  '
>' (
>( )
GetAll* 0
(0 1
)1 2
{ 	
List 
< 
Service 
> 
services "
=# $
await% *
_db+ .
.. /
Services/ 7
.7 8
ToListAsync8 C
(C D
)D E
;E F
return 
services 
; 
} 	
public 
async 
Task 
< 
Service !
>! "
GetById# *
(* +
int+ .
id/ 1
)1 2
{ 	
var 
service 
= 
await 
_db  #
.# $
Services$ ,
., -
	FindAsync- 6
(6 7
id7 9
)9 :
;: ;
return 
service 
; 
} 	
public   
async   
Task   
<   
Service   !
>  ! "
CreateUpdate  # /
(  / 0
Service  0 7
entity  8 >
)  > ?
{!! 	
if"" 
("" 
entity"" 
."" 
Id"" 
<"" 
$num"" 
)"" 
{## 
try$$ 
{%% 
await&& 
_db&& 
.&& 
Services&& &
.&&& '
AddAsync&&' /
(&&/ 0
entity&&0 6
)&&6 7
;&&7 8
if'' 
('' 
!'' 
await'' 
SaveChanges'' *
(''* +
)''+ ,
)'', -
{(( 
return)) 
null)) #
;))# $
}** 
return++ 
entity++ !
;++! "
},, 
catch-- 
(-- 
	Exception--  
)--  !
{.. 
return// 
null// 
;//  
}00 
}11 
else22 
{33 
_db44 
.44 
Services44 
.44 
Update44 #
(44# $
entity44$ *
)44* +
;44+ ,
if55 
(55 
!55 
await55 
SaveChanges55 &
(55& '
)55' (
)55( )
{66 
return77 
null77 
;77  
}88 
return99 
entity99 
;99 
}:: 
};; 	
public== 
async== 
Task== 
<== 
bool== 
>== 
Delete==  &
(==& '
Service==' .
entity==/ 5
)==5 6
{>> 	
_db?? 
.?? 
Services?? 
.?? 
Remove?? 
(??  
entity??  &
)??& '
;??' (
return@@ 
await@@ 
SaveChanges@@ $
(@@$ %
)@@% &
;@@& '
}AA 	
publicBB 
asyncBB 
TaskBB 
<BB 
boolBB 
>BB 
SaveChangesBB  +
(BB+ ,
)BB, -
{CC 	
varDD 
changesDD 
=DD 
awaitDD 
_dbDD  #
.DD# $
SaveChangesAsyncDD$ 4
(DD4 5
)DD5 6
;DD6 7
returnEE 
changesEE 
>EE 
$numEE 
;EE 
}FF 	
publicGG 
asyncGG 
TaskGG 
<GG 
boolGG 
>GG 
IsExistsGG  (
(GG( )
intGG) ,
idGG- /
)GG/ 0
{HH 	
varII 
isExistsII 
=II 
awaitII  
_dbII! $
.II$ %
ServicesII% -
.II- .
AnyAsyncII. 6
(II6 7
pII7 8
=>II9 ;
pII< =
.II= >
IdII> @
==IIA C
idIID F
)IIF G
;IIG H
returnJJ 
isExistsJJ 
;JJ 
}KK 	
}NN 
}OO 